import { VerticalBox , HorizontalBox} from "std-widgets.slint";
import { CellWidget } from "cell.slint";
import { NoteValueWidget } from "note_value.slint";
import { NoteStateWidget } from "note_state.slint";
import { Plot } from "../widgets/plot.slint";
import { BMSModelService } from "../models/bms.slint";

export component BMSView inherits Rectangle {
    background: #ffffff00;
    VerticalBox {
        spacing: 5px;
        HorizontalBox {
            for cell in [0,1,2,3,4] : CellWidget { 
                cell-number: cell + 1; 
                voltage: BMSModelService.bms-info.cell-voltage[cell]; 
            }
        }
        HorizontalBox {
            NoteValueWidget { 
                title: "Voltate";
                text: BMSModelService.bms-info.voltage+"V";
            }
            NoteValueWidget { 
                title: "Current";
                text: BMSModelService.bms-info.current+"A";
            }
            NoteValueWidget { 
                title: "Temperature";
                text: BMSModelService.bms-info.temperature+"â„ƒ";
            }
            NoteStateWidget { 
                title: "DSG";
                state: BMSModelService.bms-info.dsg;
            }
            NoteStateWidget { 
                title: "CHG";
                state: BMSModelService.bms-info.chg;
            }
        }

        HorizontalBox {
            Plot { title: "Voltate plot"; source: BMSModelService.bms-info.voltage-plot;}
            Plot { title: "Current plot"; source: BMSModelService.bms-info.current-plot;}
        }
        Rectangle{

        }
    }
}